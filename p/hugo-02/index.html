<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="簡介  這部份是紀錄我修改的主題內容，並將 codeblocks 區塊美化，以及支援 KaTex 和 Google Analytics  教學開始  我使用的主題為 Stack  主題內容修改  找到 assets/scss/variables.scss，並修改 1--link-background-color: 90, 240, 250; //189, 195, 199; 2--code-text-color: #ef3982; //rgba(255, 255, 255, 0.9);   Codeblocks 區塊美化  到 static/css/ 下建立 copy-to-clipboard.css，內容如下 1.highlight { 2 position: relative; 3} 4.highlight .ln { 5 -moz-user-select: none; 6 -webkit-user-select: none; 7 -ms-user-select: none; 8 user-select: none; 9} 10.highlight-copy-btn { 11 position: absolute; 12 top: 7px; 13 right: 7px; 14 border: 0; 15 border-radius: 4px; 16 padding: 1px; 17 font-size: 0."><title>Hugo-02：優化 Blog</title>
<link rel=canonical href=https://blog.smallten.tk/p/hugo-02/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Hugo-02：優化 Blog">
<meta property="og:description" content="簡介  這部份是紀錄我修改的主題內容，並將 codeblocks 區塊美化，以及支援 KaTex 和 Google Analytics  教學開始  我使用的主題為 Stack  主題內容修改  找到 assets/scss/variables.scss，並修改 1--link-background-color: 90, 240, 250; //189, 195, 199; 2--code-text-color: #ef3982; //rgba(255, 255, 255, 0.9);   Codeblocks 區塊美化  到 static/css/ 下建立 copy-to-clipboard.css，內容如下 1.highlight { 2 position: relative; 3} 4.highlight .ln { 5 -moz-user-select: none; 6 -webkit-user-select: none; 7 -ms-user-select: none; 8 user-select: none; 9} 10.highlight-copy-btn { 11 position: absolute; 12 top: 7px; 13 right: 7px; 14 border: 0; 15 border-radius: 4px; 16 padding: 1px; 17 font-size: 0.">
<meta property="og:url" content="https://blog.smallten.tk/p/hugo-02/">
<meta property="og:site_name" content="小十的部落格">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Hugo"><meta property="article:published_time" content="2021-02-07T04:06:17+08:00"><meta property="article:modified_time" content="2021-02-07T04:06:17+08:00">
<meta name=twitter:title content="Hugo-02：優化 Blog">
<meta name=twitter:description content="簡介  這部份是紀錄我修改的主題內容，並將 codeblocks 區塊美化，以及支援 KaTex 和 Google Analytics  教學開始  我使用的主題為 Stack  主題內容修改  找到 assets/scss/variables.scss，並修改 1--link-background-color: 90, 240, 250; //189, 195, 199; 2--code-text-color: #ef3982; //rgba(255, 255, 255, 0.9);   Codeblocks 區塊美化  到 static/css/ 下建立 copy-to-clipboard.css，內容如下 1.highlight { 2 position: relative; 3} 4.highlight .ln { 5 -moz-user-select: none; 6 -webkit-user-select: none; 7 -ms-user-select: none; 8 user-select: none; 9} 10.highlight-copy-btn { 11 position: absolute; 12 top: 7px; 13 right: 7px; 14 border: 0; 15 border-radius: 4px; 16 padding: 1px; 17 font-size: 0.">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RPR56CRPCG"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-RPR56CRPCG',{anonymize_ip:!1})}</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RPR56CRPCG"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-RPR56CRPCG',{anonymize_ip:!1})}</script>
<link rel=stylesheet href=https://blog.smallten.tk/css/copy-to-clipboard.css>
<link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png>
<link rel=manifest href=/favicon/site.webmanifest>
<link rel=mask-icon href=/favicon/safari-pinned-tab.svg color=#5bbad5>
<meta name=msapplication-TileColor content="#da532c">
<meta name=theme-color content="#ffffff">
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=https://blog.smallten.tk/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<h2 class=article-title>
<a href=/p/hugo-02/>Hugo-02：優化 Blog</a>
</h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Feb 07, 2021</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
2 min read
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h1 id=簡介>簡介</h1>
<ul>
<li>這部份是紀錄我修改的主題內容，並將 codeblocks 區塊美化，以及支援 <a class=link href=https://katex.org/ target=_blank rel=noopener>KaTex</a> 和 Google Analytics</li>
</ul>
<h1 id=教學開始>教學開始</h1>
<ul>
<li>我使用的主題為 <a class=link href=https://themes.gohugo.io/hugo-theme-stack/ target=_blank rel=noopener>Stack</a></li>
</ul>
<h2 id=主題內容修改>主題內容修改</h2>
<ul>
<li>找到 <code>assets/scss/variables.scss</code>，並修改
<div class=highlight><pre tabindex=0 class=chroma><code class=language-scss data-lang=scss><span class=ln>1</span><span class=na>--link-background-color</span><span class=o>:</span> <span class=mi>90</span><span class=o>,</span> <span class=mi>240</span><span class=o>,</span> <span class=mi>250</span><span class=p>;</span> <span class=c1>//189, 195, 199;
</span><span class=ln>2</span><span class=c1></span><span class=na>--code-text-color</span><span class=o>:</span> <span class=mh>#ef3982</span><span class=p>;</span> <span class=c1>//rgba(255, 255, 255, 0.9);
</span></code></pre></div></li>
</ul>
<h2 id=codeblocks-區塊美化>Codeblocks 區塊美化</h2>
<ol>
<li>到 <code>static/css/</code> 下建立 <code>copy-to-clipboard.css</code>，內容如下
<div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=ln> 1</span><span class=p>.</span><span class=nc>highlight</span> <span class=p>{</span>
<span class=ln> 2</span>    <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
<span class=ln> 3</span><span class=p>}</span>
<span class=ln> 4</span><span class=p>.</span><span class=nc>highlight</span> <span class=p>.</span><span class=nc>ln</span> <span class=p>{</span>
<span class=ln> 5</span>    <span class=kp>-moz-</span><span class=k>user-select</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
<span class=ln> 6</span>    <span class=kp>-webkit-</span><span class=k>user-select</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
<span class=ln> 7</span>    <span class=kp>-ms-</span><span class=k>user-select</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
<span class=ln> 8</span>    <span class=k>user-select</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
<span class=ln> 9</span><span class=p>}</span>
<span class=ln>10</span><span class=p>.</span><span class=nc>highlight-copy-btn</span> <span class=p>{</span>
<span class=ln>11</span>    <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
<span class=ln>12</span>    <span class=k>top</span><span class=p>:</span> <span class=mi>7</span><span class=kt>px</span><span class=p>;</span>
<span class=ln>13</span>    <span class=k>right</span><span class=p>:</span> <span class=mi>7</span><span class=kt>px</span><span class=p>;</span>
<span class=ln>14</span>    <span class=k>border</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
<span class=ln>15</span>    <span class=k>border-radius</span><span class=p>:</span> <span class=mi>4</span><span class=kt>px</span><span class=p>;</span>
<span class=ln>16</span>    <span class=k>padding</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span><span class=p>;</span>
<span class=ln>17</span>    <span class=k>font-size</span><span class=p>:</span> <span class=mf>0.8</span><span class=kt>em</span><span class=p>;</span>
<span class=ln>18</span>    <span class=k>line-height</span><span class=p>:</span> <span class=mf>1.8</span><span class=p>;</span>
<span class=ln>19</span>    <span class=k>color</span><span class=p>:</span> <span class=mh>#fff</span><span class=p>;</span>
<span class=ln>20</span>    <span class=k>background-color</span><span class=p>:</span> <span class=mh>#777</span><span class=p>;</span>
<span class=ln>21</span>    <span class=k>min-width</span><span class=p>:</span> <span class=mi>55</span><span class=kt>px</span><span class=p>;</span>
<span class=ln>22</span>    <span class=k>text-align</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
<span class=ln>23</span><span class=p>}</span>
<span class=ln>24</span><span class=p>.</span><span class=nc>highlight-copy-btn</span><span class=p>:</span><span class=nd>hover</span> <span class=p>{</span>
<span class=ln>25</span>    <span class=k>background-color</span><span class=p>:</span> <span class=mh>#666</span><span class=p>;</span>
<span class=ln>26</span><span class=p>}</span>
</code></pre></div></li>
<li>到 <code>static/js/</code> 下建立 <code>copy-to-clipboard.js</code>，內容如下
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=ln> 1</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
<span class=ln> 2</span>    <span class=s1>&#39;use strict&#39;</span><span class=p>;</span>
<span class=ln> 3</span>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nb>document</span><span class=p>.</span><span class=nx>queryCommandSupported</span><span class=p>(</span><span class=s1>&#39;copy&#39;</span><span class=p>))</span> <span class=p>{</span>
<span class=ln> 4</span>        <span class=k>return</span><span class=p>;</span>
<span class=ln> 5</span>    <span class=p>}</span>
<span class=ln> 6</span>    <span class=kd>function</span> <span class=nx>flashCopyMessage</span><span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=nx>msg</span><span class=p>)</span> <span class=p>{</span>
<span class=ln> 7</span>        <span class=nx>el</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>=</span> <span class=nx>msg</span><span class=p>;</span>
<span class=ln> 8</span>        <span class=nx>setTimeout</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
<span class=ln> 9</span>            <span class=nx>el</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>=</span> <span class=s2>&#34;Copy&#34;</span><span class=p>;</span>
<span class=ln>10</span>        <span class=p>},</span> <span class=mi>1000</span><span class=p>);</span>
<span class=ln>11</span>    <span class=p>}</span>
<span class=ln>12</span>    <span class=kd>function</span> <span class=nx>selectText</span><span class=p>(</span><span class=nx>node</span><span class=p>)</span> <span class=p>{</span>
<span class=ln>13</span>        <span class=kd>var</span> <span class=nx>selection</span> <span class=o>=</span> <span class=nb>window</span><span class=p>.</span><span class=nx>getSelection</span><span class=p>();</span>
<span class=ln>14</span>        <span class=kd>var</span> <span class=nx>range</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createRange</span><span class=p>();</span>
<span class=ln>15</span>        <span class=nx>range</span><span class=p>.</span><span class=nx>selectNodeContents</span><span class=p>(</span><span class=nx>node</span><span class=p>);</span>
<span class=ln>16</span>        <span class=nx>selection</span><span class=p>.</span><span class=nx>removeAllRanges</span><span class=p>();</span>
<span class=ln>17</span>        <span class=nx>selection</span><span class=p>.</span><span class=nx>addRange</span><span class=p>(</span><span class=nx>range</span><span class=p>);</span>
<span class=ln>18</span>        <span class=k>return</span> <span class=nx>selection</span><span class=p>;</span>
<span class=ln>19</span>    <span class=p>}</span>
<span class=ln>20</span>    <span class=kd>function</span> <span class=nx>addCopyButton</span><span class=p>(</span><span class=nx>containerEl</span><span class=p>)</span> <span class=p>{</span>
<span class=ln>21</span>        <span class=kd>var</span> <span class=nx>copyBtn</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s2>&#34;button&#34;</span><span class=p>);</span>
<span class=ln>22</span>        <span class=nx>copyBtn</span><span class=p>.</span><span class=nx>className</span> <span class=o>=</span> <span class=s2>&#34;highlight-copy-btn&#34;</span><span class=p>;</span>
<span class=ln>23</span>        <span class=nx>copyBtn</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>=</span> <span class=s2>&#34;Copy&#34;</span><span class=p>;</span>
<span class=ln>24</span>
<span class=ln>25</span>        <span class=kd>var</span> <span class=nx>codeEl</span> <span class=o>=</span> <span class=nx>containerEl</span><span class=p>.</span><span class=nx>firstElementChild</span><span class=p>;</span>
<span class=ln>26</span>        <span class=nx>copyBtn</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;click&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
<span class=ln>27</span>            <span class=k>try</span> <span class=p>{</span>
<span class=ln>28</span>                <span class=kd>var</span> <span class=nx>selection</span> <span class=o>=</span> <span class=nx>selectText</span><span class=p>(</span><span class=nx>codeEl</span><span class=p>);</span>
<span class=ln>29</span>                <span class=nb>document</span><span class=p>.</span><span class=nx>execCommand</span><span class=p>(</span><span class=s1>&#39;copy&#39;</span><span class=p>);</span>
<span class=ln>30</span>                <span class=nx>selection</span><span class=p>.</span><span class=nx>removeAllRanges</span><span class=p>();</span>
<span class=ln>31</span>
<span class=ln>32</span>                <span class=nx>flashCopyMessage</span><span class=p>(</span><span class=nx>copyBtn</span><span class=p>,</span> <span class=s1>&#39;Copied!&#39;</span><span class=p>)</span>
<span class=ln>33</span>            <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
<span class=ln>34</span>                <span class=nx>console</span> <span class=o>&amp;&amp;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>e</span><span class=p>);</span>
<span class=ln>35</span>                <span class=nx>flashCopyMessage</span><span class=p>(</span><span class=nx>copyBtn</span><span class=p>,</span> <span class=s1>&#39;Failed :\&#39;(&#39;</span><span class=p>)</span>
<span class=ln>36</span>            <span class=p>}</span>
<span class=ln>37</span>        <span class=p>});</span>
<span class=ln>38</span>        <span class=nx>containerEl</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>copyBtn</span><span class=p>);</span>
<span class=ln>39</span>    <span class=p>}</span>
<span class=ln>40</span>    <span class=c1>// Add copy button to code blocks
</span><span class=ln>41</span><span class=c1></span>    <span class=kd>var</span> <span class=nx>highlightBlocks</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByClassName</span><span class=p>(</span><span class=s1>&#39;highlight&#39;</span><span class=p>);</span>
<span class=ln>42</span>    <span class=nb>Array</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>forEach</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=nx>highlightBlocks</span><span class=p>,</span> <span class=nx>addCopyButton</span><span class=p>);</span>
<span class=ln>43</span><span class=p>})();</span>
</code></pre></div></li>
<li>修改 <code>config.yaml</code>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=ln>1</span><span class=nt>custom_css</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;css/copy-to-clipboard.css&#34;</span><span class=p>]</span><span class=w>
</span><span class=ln>2</span><span class=w>
</span><span class=ln>3</span><span class=w></span><span class=nt>pygmentsUseClasses</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=ln>4</span><span class=w></span><span class=nt>markup</span><span class=p>:</span><span class=w>
</span><span class=ln>5</span><span class=w>    </span><span class=nt>highlight</span><span class=p>:</span><span class=w>
</span><span class=ln>6</span><span class=w>        </span><span class=nt>lineNos</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=ln>7</span><span class=w>        </span><span class=nt>lineNumbersInTable</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></code></pre></div></li>
<li>修改 <code>layouts/partials/head/custom.html</code>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=ln>1</span>{{ range .Site.Params.custom_css -}}
<span class=ln>2</span>    <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{ . | absURL }}&#34;</span><span class=p>&gt;</span>
<span class=ln>3</span>{{- end }}
<span class=ln>4</span>{{ range .Site.Params.custom_js -}}
<span class=ln>5</span>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ . | absURL }}&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=ln>6</span>{{- end }}
</code></pre></div></li>
<li>修改 <code>layouts/partials/footer/custom.html</code>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=ln>1</span><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/js/copy-to-clipboard.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</code></pre></div></li>
<li>這樣程式碼區塊就有 Copy Button，並且直接複製時不會選取到行號了</li>
</ol>
<h2 id=katex>KaTex</h2>
<ol>
<li>到 <code>layouts/partials/</code> 下新增 <code>math.html</code>，內容如下
<div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=ln> 1</span>{{ if or .Params.math .Site.Params.math }}
<span class=ln> 2</span><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css&#34;</span> <span class=na>integrity</span><span class=o>=</span><span class=s>&#34;sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;</span>
<span class=ln> 3</span><span class=p>&lt;</span><span class=nt>script</span> <span class=na>defer</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js&#34;</span> <span class=na>integrity</span><span class=o>=</span><span class=s>&#34;sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=ln> 4</span><span class=p>&lt;</span><span class=nt>script</span> <span class=na>defer</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js&#34;</span> <span class=na>integrity</span><span class=o>=</span><span class=s>&#34;sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa&#34;</span> <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span> <span class=na>onload</span><span class=o>=</span><span class=s>&#34;renderMathInElement(document.body);&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=ln> 5</span><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=ln> 6</span>    <span class=nb>document</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;DOMContentLoaded&#34;</span><span class=p>,</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
<span class=ln> 7</span>        <span class=nx>renderMathInElement</span><span class=p>(</span><span class=nb>document</span><span class=p>.</span><span class=nx>body</span><span class=p>,</span> <span class=p>{</span>
<span class=ln> 8</span>            <span class=nx>delimiters</span><span class=o>:</span> <span class=p>[</span>
<span class=ln> 9</span>                <span class=p>{</span><span class=nx>left</span><span class=o>:</span> <span class=s2>&#34;$$&#34;</span><span class=p>,</span> <span class=nx>right</span><span class=o>:</span> <span class=s2>&#34;$$&#34;</span><span class=p>,</span> <span class=nx>display</span><span class=o>:</span> <span class=kc>true</span><span class=p>},</span>
<span class=ln>10</span>                <span class=p>{</span><span class=nx>left</span><span class=o>:</span> <span class=s2>&#34;\\[&#34;</span><span class=p>,</span> <span class=nx>right</span><span class=o>:</span> <span class=s2>&#34;\\]&#34;</span><span class=p>,</span> <span class=nx>display</span><span class=o>:</span> <span class=kc>true</span><span class=p>},</span>
<span class=ln>11</span>                <span class=p>{</span><span class=nx>left</span><span class=o>:</span> <span class=s2>&#34;$&#34;</span><span class=p>,</span> <span class=nx>right</span><span class=o>:</span> <span class=s2>&#34;$&#34;</span><span class=p>,</span> <span class=nx>display</span><span class=o>:</span> <span class=kc>false</span><span class=p>},</span>
<span class=ln>12</span>                <span class=p>{</span><span class=nx>left</span><span class=o>:</span> <span class=s2>&#34;\\(&#34;</span><span class=p>,</span> <span class=nx>right</span><span class=o>:</span> <span class=s2>&#34;\\)&#34;</span><span class=p>,</span> <span class=nx>display</span><span class=o>:</span> <span class=kc>false</span><span class=p>}</span>
<span class=ln>13</span>            <span class=p>]</span>
<span class=ln>14</span>        <span class=p>});</span>
<span class=ln>15</span>    <span class=p>});</span>
<span class=ln>16</span><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
<span class=ln>17</span>{{ end }}
</code></pre></div></li>
<li>修改 <code>layouts/partials/head/custom.html</code>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=ln>1</span>{{ partial &#34;math.html&#34; . }}
</code></pre></div></li>
</ol>
<h2 id=google-analytics>Google Analytics</h2>
<ol>
<li>到 Google Analytics 創建一個資料串流</li>
<li>由於 Hugo 內建的 GA 模板，似乎還不支援 GA4，因此我們使用 <code>gtag.js</code></li>
<li>複製剛剛建立的資料串流中的 <code>gtag.js</code> 內容到 <code>layouts/partials/google_analytics.html</code>中</li>
<li>修改 <code>layouts/partials/head/custom.html</code>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=ln>1</span>{{ if not .Site.IsServer }}{{ partial &#34;google_analytics.html&#34; . }}{{ end }}
</code></pre></div><ul>
<li>這裡的 <code>if</code> 是避免在 local 測試時的數據也被紀錄下來</li>
</ul>
</li>
</ol>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/hugo/>Hugo</a>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
</aside>
<footer class=site-footer>
<section class=copyright>
&copy;
2020 -
2021 小十的部落格
</section>
<section class=powerby>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.5.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ul>
<li><a href=#主題內容修改>主題內容修改</a></li>
<li><a href=#codeblocks-區塊美化>Codeblocks 區塊美化</a></li>
<li><a href=#katex>KaTex</a></li>
<li><a href=#google-analytics>Google Analytics</a></li>
</ul>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
<script src=/js/copy-to-clipboard.js></script>
</body>
</html>