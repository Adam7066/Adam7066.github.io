<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='題目 HW02 players_20.csv 參考作法 C 語言 在 main() 中讀取 file 跟 inSquad 時偷懶，所沒用動態記憶體配置。 但在讀取 CSV 內容時，有使用動態記憶體配置呦！ 然後可以的話，建議可以直接使用 mmap() 來讀取檔案，比較簡單，但當時同學還沒上到這個，就沒使用了。（攤～ Makefile 因為有使用到 Glib，所以要加上一些東西。 1 2 all: gcc hw0204.c `pkg-config --cflags --libs glib-2.0` -o hw0204 程式碼 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 #include <stdio.h> #include <stdlib.h> #include <string.h> #include <stdbool.h> #include <ctype.h> #include <glib.h> #define bufSize 256 static char abilityStr[27][5] = { "ls", "st", "rs", "lw", "lf", "cf", "rf", "rw", "lam", "cam", "ram", "lm", "lcm", "cm", "rcm", "rm", "lwb", "ldm", "cdm", "rdm", "rwb", "lb", "lcb", "cb", "rcb", "rb", "gk" }; typedef struct { char *sofifa_id, *short_name; double value_eur, wage_eur; char *club_name; GHashTable *ability; bool selected; } Player; static Player *player = NULL; static size_t playerNum = 0; static size_t playerSize = 0; static char *cmpPosition; static double budget[11] = {0}; void printTeam(Player *p, char *position) { printf("%s/%s/", p->short_name, p->club_name); double ability = GPOINTER_TO_INT(g_hash_table_lookup(p->ability, position)); g_print("%g/", ability); printf("%d/%d\\n", (int)(p->value_eur), (int)(p->wage_eur)); } double getAbility(char *str) { double a = 0, b = 0; if(strchr(str, &#39;+&#39;) != NULL) sscanf(str, "%lf+%lf", &amp;a, &amp;b); else sscanf(str, "%lf", &amp;a); return a + b; } void parseLine(Player *p, char *token, int cnt) { if(cnt == 0 || cnt == 2 || cnt == 14) { char *str = calloc(strlen(token) + 1, sizeof(char)); strcpy(str, token); if(cnt == 0) p->sofifa_id = str; else if(cnt == 2) p->short_name = str; else if(cnt == 14) p->club_name = str; } else if(cnt == 7 || cnt == 8) { char **endPtr = NULL; bool spaceFlag = true; size_t tokenLen = strlen(token); for(int i = 0; i < tokenLen; ++i) { if(!isspace(token[i])) { spaceFlag = false; break; } } double eur = spaceFlag ? -1 : strtod(token, endPtr); if(cnt == 7) p->value_eur = eur; else if(cnt == 8) p->wage_eur = eur; } else if(cnt >= 78 && cnt <= 104) { g_hash_table_insert(p->ability, abilityStr[cnt - 78], GINT_TO_POINTER(getAbility(token))); } } void getPlayer(FILE *fp) { char *line = calloc(bufSize, sizeof(char)); size_t lineCnt = 0; while((line = fgets(line, bufSize, fp)) != NULL) { size_t len = strlen(line); if(len == bufSize - 1 && line[len - 1] != &#39;\\n&#39;) { int newLen = len << 1; line = realloc(line, newLen); if(!line) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } while(fgets(line + len, newLen - len, fp) != NULL) { len = strlen(line); if(line[len - 1] == &#39;\\n&#39;) break; newLen = len << 1; line = realloc(line, newLen); if(!line) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } } } char *find = strstr(line, ",,"); while(find != NULL) { char *tmp = calloc(strlen(line) + 2, sizeof(char)); tmp[strlen(line) + 1] = &#39;\\0&#39;; strncpy(tmp, line, find - line + 1); tmp[find - line + 1] = &#39; &#39;; strncat(tmp + (find - line) + 2, find + 1, strlen(find + 1)); free(line); line = tmp; find = strstr(line, ",,"); } if(lineCnt == 0) { ++lineCnt; continue; } if(playerNum == playerSize) { playerSize = playerSize == 0 ? 1 : playerSize << 1; player = realloc(player, playerSize * sizeof(Player)); if(!player) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } for(size_t i = playerNum; i < playerSize; ++i) { player[i].ability = g_hash_table_new(g_str_hash, g_str_equal); player[i].selected = false; } } int cnt = 0; char *token = strtok(line, ","); while(token != NULL) { if(token[0] == &#39;\\"&#39;) { char *tmp = calloc(strlen(token) + 1, sizeof(char)); strncpy(tmp, token + 1, strlen(token)); tmp[strlen(tmp)] = &#39;,&#39;; token = strtok(NULL, "\\""); tmp = realloc(tmp, strlen(tmp) + strlen(token) + 1); strncat(tmp, token, strlen(token)); tmp[strlen(tmp)] = &#39;\\0&#39;; parseLine(&amp;player[playerNum], tmp, cnt); free(tmp); } else parseLine(&amp;player[playerNum], token, cnt); token = strtok(NULL, ","); ++cnt; } ++lineCnt; ++playerNum; } free(line); } int cmpDouble(const double a, const double b, bool flag) { if(flag) return (a > b) ? -1 : (a < b) ? 1 : 0; // greater return (a < b) ? -1 : (a > b) ? 1 : 0; // less } int cmpString(const char *a, const char *b, bool flag) { if(flag) return strcmp(b, a); return strcmp(a, b); } int cmpAbility(const void *a, const void *b) { const Player *c = (Player *)a; const Player *d = (Player *)b; return cmpDouble( GPOINTER_TO_INT(g_hash_table_lookup(c->ability, cmpPosition)), GPOINTER_TO_INT(g_hash_table_lookup(d->ability, cmpPosition)), true ); } int cmpBudget(const void *a, const void *b) { Player *c = (Player *)a; Player *d = (Player *)b; return cmpDouble(c->value_eur, d->value_eur, false); } int cmpSofifaId(const void *a, const void *b) { Player *c = (Player *)a; Player *d = (Player *)b; return cmpString(c->sofifa_id, d->sofifa_id, false); } void getTeam(char *position, int pos) { qsort(player, playerNum, sizeof(Player), cmpBudget); Player *tmpPlayer = NULL; size_t tmpPlayerNum = 0; size_t tmpPlayerSize = 0; for(int i = 0; i < playerNum; ++i) { if(!player[i].selected && player[i].value_eur >= 0 && player[i].value_eur <= budget[pos]) { if(tmpPlayerNum == tmpPlayerSize) { tmpPlayerSize = tmpPlayerSize == 0 ? 1 : tmpPlayerSize << 1; tmpPlayer = realloc(tmpPlayer, tmpPlayerSize * sizeof(Player)); if(!tmpPlayer) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } } tmpPlayer[tmpPlayerNum++] = player[i]; } } if(tmpPlayerNum == 0) { printf("No player can be selected\\n"); return; } cmpPosition = position; qsort(tmpPlayer, tmpPlayerNum, sizeof(Player), cmpAbility); size_t sameAbilityNum = 1; double maxAbility = GPOINTER_TO_INT(g_hash_table_lookup(tmpPlayer[0].ability, position)); for(int i = 1; i < tmpPlayerNum; ++i) { double ability = GPOINTER_TO_INT(g_hash_table_lookup(tmpPlayer[i].ability, position)); if(ability == maxAbility) ++sameAbilityNum; else break; } if(sameAbilityNum == 1) printTeam(&amp;tmpPlayer[0], position); else { qsort(tmpPlayer, sameAbilityNum, sizeof(Player), cmpBudget); size_t sameBudgetNum = 1; double minBudget = tmpPlayer[0].value_eur; for(int i = 1; i < sameAbilityNum; ++i) { if(tmpPlayer[i].value_eur == minBudget) ++sameBudgetNum; else break; } if(sameBudgetNum == 1) printTeam(&amp;tmpPlayer[0], position); else { qsort(tmpPlayer, sameBudgetNum, sizeof(Player), cmpSofifaId); printTeam(&amp;tmpPlayer[0], position); } } for(int i = 0; i < playerNum; ++i) { if(strcmp(player[i].sofifa_id, tmpPlayer[0].sofifa_id) == 0) { player[i].selected = true; break; } } free(tmpPlayer); } int main() { char file[100]; printf("Please enter the dataset: "); fgets(file, 100, stdin); if(file[strlen(file) - 1] == &#39;\\n&#39;) file[strlen(file) - 1] = &#39;\\0&#39;; FILE *fp = fopen(file, "rt"); if(!fp) exit(EXIT_FAILURE); getPlayer(fp); fclose(fp); char inSquad[100]; printf("Please enter the squad: "); fgets(inSquad, 100, stdin); if(inSquad[strlen(inSquad) - 1] == &#39;\\n&#39;) inSquad[strlen(inSquad) - 1] = &#39;\\0&#39;; char **squad = calloc(11, sizeof(char *)); int squadNum = 0; char *token = strtok(inSquad, " "); while(token != NULL) { squad[squadNum] = calloc(strlen(token) + 1, sizeof(char)); strncpy(squad[squadNum], token, strlen(token)); ++squadNum; token = strtok(NULL, " "); } if(strcmp(squad[10], "gk") != 0) { printf("gk must be the last one of the team.\\n"); exit(EXIT_FAILURE); } printf("Budget:\\n"); for(int i = 0; i < 11; ++i) { printf("\\t%s: ", squad[i]); scanf("%lf", &amp;budget[i]); } printf("Team:\\n"); for(int i = 0; i < 11; ++i) { printf("\\t%s: ", squad[i]); getTeam(squad[i], i); } return 0; } Golang 程式碼 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 package main import ( "encoding/csv" "fmt" "os" "sort" "strings" ) var abilityStr = []string{ "ls", "st", "rs", "lw", "lf", "cf", "rf", "rw", "lam", "cam", "ram", "lm", "lcm", "cm", "rcm", "rm", "lwb", "ldm", "cdm", "rdm", "rwb", "lb", "lcb", "cb", "rcb", "rb", "gk", } type Player struct { sofifa_id, short_name string value_eur, wage_eur int club_name string ability map[string]int selected bool } var players []Player func readCSV(csvFile string) { f, err := os.Open(csvFile) if err != nil { panic(err) } defer f.Close() csvReader := csv.NewReader(f) title, err := csvReader.Read() if err != nil { panic(err) } for { record, err := csvReader.Read() if err != nil { break } player := Player{} player.ability = make(map[string]int) for i, v := range record { if title[i] == "sofifa_id" { player.sofifa_id = v } else if title[i] == "short_name" { player.short_name = v } else if title[i] == "value_eur" { if v != "" { fmt.Sscanf(v, "%d", &amp;player.value_eur) } else { player.value_eur = -1 } } else if title[i] == "wage_eur" { if v != "" { fmt.Sscanf(v, "%d", &amp;player.wage_eur) } else { player.wage_eur = -1 } } else if title[i] == "club_name" { player.club_name = v } for _, ability := range abilityStr { if title[i] == ability { var a, b int if strings.Contains(v, "+") { fmt.Sscanf(v, "%d+%d", &amp;a, &amp;b) player.ability[ability] = a + b } else if v != "" { fmt.Sscanf(v, "%d", &amp;a) player.ability[ability] = a } else { player.ability[ability] = -1 } } } } players = append(players, player) } } func printPlayer(squad string, player Player) { fmt.Println( squad, ": ", player.short_name, "/", player.club_name, "/", player.ability[squad], "/", player.value_eur, "/", player.wage_eur, ) } func main() { var csvFile string fmt.Scanf("%s", &amp;csvFile) readCSV(csvFile) var squad []string for i := 0; i < 11; i++ { var id string fmt.Scanf("%s", &amp;id) squad = append(squad, id) } var budget []int for i := 0; i < 11; i++ { var b int fmt.Scanf("%d", &amp;b) budget = append(budget, b) } for i, id := range squad { tmpPlayers := make([]Player, 0) for _, player := range players { if !player.selected && player.value_eur >= 0 && player.value_eur <= budget[i] { tmpPlayers = append(tmpPlayers, player) } } if len(tmpPlayers) == 0 { fmt.Println("No player can be selected") } sort.Slice(tmpPlayers, func(i, j int) bool { return tmpPlayers[i].ability[id] > tmpPlayers[j].ability[id] }) cntSameAbility := 0 maxAbility := tmpPlayers[0].ability[id] for _, player := range tmpPlayers { if player.ability[id] == maxAbility { cntSameAbility++ } else { break } } if cntSameAbility == 1 { printPlayer(id, tmpPlayers[0]) } else { sort.Slice(tmpPlayers[:cntSameAbility], func(i, j int) bool { return tmpPlayers[i].value_eur < tmpPlayers[j].value_eur }) cntSameBudget := 0 minBudget := tmpPlayers[0].value_eur for _, player := range tmpPlayers[:cntSameAbility] { if player.value_eur == minBudget { cntSameBudget++ } else { break } } if cntSameBudget == 1 { printPlayer(id, tmpPlayers[0]) } else { sort.Slice(tmpPlayers[:cntSameBudget], func(i, j int) bool { return tmpPlayers[i].sofifa_id < tmpPlayers[j].sofifa_id }) printPlayer(id, tmpPlayers[0]) } } for j := 0; j < len(players); j++ { if players[j].sofifa_id == tmpPlayers[0].sofifa_id { players[j].selected = true } } } } '><title>程式設計(二)-09：111-2 HW0204 參考作法</title>
<link rel=canonical href=https://blog.smallten.me/p/computer_programming_2-09/><link rel=stylesheet href=/scss/style.min.14c8dd7a5184c7bde0c496d7bd72d867c041f2ea72f238426b3c03c02cceecfd.css><meta property='og:title' content="程式設計(二)-09：111-2 HW0204 參考作法"><meta property='og:description' content='題目 HW02 players_20.csv 參考作法 C 語言 在 main() 中讀取 file 跟 inSquad 時偷懶，所沒用動態記憶體配置。 但在讀取 CSV 內容時，有使用動態記憶體配置呦！ 然後可以的話，建議可以直接使用 mmap() 來讀取檔案，比較簡單，但當時同學還沒上到這個，就沒使用了。（攤～ Makefile 因為有使用到 Glib，所以要加上一些東西。 1 2 all: gcc hw0204.c `pkg-config --cflags --libs glib-2.0` -o hw0204 程式碼 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 #include <stdio.h> #include <stdlib.h> #include <string.h> #include <stdbool.h> #include <ctype.h> #include <glib.h> #define bufSize 256 static char abilityStr[27][5] = { "ls", "st", "rs", "lw", "lf", "cf", "rf", "rw", "lam", "cam", "ram", "lm", "lcm", "cm", "rcm", "rm", "lwb", "ldm", "cdm", "rdm", "rwb", "lb", "lcb", "cb", "rcb", "rb", "gk" }; typedef struct { char *sofifa_id, *short_name; double value_eur, wage_eur; char *club_name; GHashTable *ability; bool selected; } Player; static Player *player = NULL; static size_t playerNum = 0; static size_t playerSize = 0; static char *cmpPosition; static double budget[11] = {0}; void printTeam(Player *p, char *position) { printf("%s/%s/", p->short_name, p->club_name); double ability = GPOINTER_TO_INT(g_hash_table_lookup(p->ability, position)); g_print("%g/", ability); printf("%d/%d\\n", (int)(p->value_eur), (int)(p->wage_eur)); } double getAbility(char *str) { double a = 0, b = 0; if(strchr(str, &#39;+&#39;) != NULL) sscanf(str, "%lf+%lf", &amp;a, &amp;b); else sscanf(str, "%lf", &amp;a); return a + b; } void parseLine(Player *p, char *token, int cnt) { if(cnt == 0 || cnt == 2 || cnt == 14) { char *str = calloc(strlen(token) + 1, sizeof(char)); strcpy(str, token); if(cnt == 0) p->sofifa_id = str; else if(cnt == 2) p->short_name = str; else if(cnt == 14) p->club_name = str; } else if(cnt == 7 || cnt == 8) { char **endPtr = NULL; bool spaceFlag = true; size_t tokenLen = strlen(token); for(int i = 0; i < tokenLen; ++i) { if(!isspace(token[i])) { spaceFlag = false; break; } } double eur = spaceFlag ? -1 : strtod(token, endPtr); if(cnt == 7) p->value_eur = eur; else if(cnt == 8) p->wage_eur = eur; } else if(cnt >= 78 && cnt <= 104) { g_hash_table_insert(p->ability, abilityStr[cnt - 78], GINT_TO_POINTER(getAbility(token))); } } void getPlayer(FILE *fp) { char *line = calloc(bufSize, sizeof(char)); size_t lineCnt = 0; while((line = fgets(line, bufSize, fp)) != NULL) { size_t len = strlen(line); if(len == bufSize - 1 && line[len - 1] != &#39;\\n&#39;) { int newLen = len << 1; line = realloc(line, newLen); if(!line) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } while(fgets(line + len, newLen - len, fp) != NULL) { len = strlen(line); if(line[len - 1] == &#39;\\n&#39;) break; newLen = len << 1; line = realloc(line, newLen); if(!line) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } } } char *find = strstr(line, ",,"); while(find != NULL) { char *tmp = calloc(strlen(line) + 2, sizeof(char)); tmp[strlen(line) + 1] = &#39;\\0&#39;; strncpy(tmp, line, find - line + 1); tmp[find - line + 1] = &#39; &#39;; strncat(tmp + (find - line) + 2, find + 1, strlen(find + 1)); free(line); line = tmp; find = strstr(line, ",,"); } if(lineCnt == 0) { ++lineCnt; continue; } if(playerNum == playerSize) { playerSize = playerSize == 0 ? 1 : playerSize << 1; player = realloc(player, playerSize * sizeof(Player)); if(!player) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } for(size_t i = playerNum; i < playerSize; ++i) { player[i].ability = g_hash_table_new(g_str_hash, g_str_equal); player[i].selected = false; } } int cnt = 0; char *token = strtok(line, ","); while(token != NULL) { if(token[0] == &#39;\\"&#39;) { char *tmp = calloc(strlen(token) + 1, sizeof(char)); strncpy(tmp, token + 1, strlen(token)); tmp[strlen(tmp)] = &#39;,&#39;; token = strtok(NULL, "\\""); tmp = realloc(tmp, strlen(tmp) + strlen(token) + 1); strncat(tmp, token, strlen(token)); tmp[strlen(tmp)] = &#39;\\0&#39;; parseLine(&amp;player[playerNum], tmp, cnt); free(tmp); } else parseLine(&amp;player[playerNum], token, cnt); token = strtok(NULL, ","); ++cnt; } ++lineCnt; ++playerNum; } free(line); } int cmpDouble(const double a, const double b, bool flag) { if(flag) return (a > b) ? -1 : (a < b) ? 1 : 0; // greater return (a < b) ? -1 : (a > b) ? 1 : 0; // less } int cmpString(const char *a, const char *b, bool flag) { if(flag) return strcmp(b, a); return strcmp(a, b); } int cmpAbility(const void *a, const void *b) { const Player *c = (Player *)a; const Player *d = (Player *)b; return cmpDouble( GPOINTER_TO_INT(g_hash_table_lookup(c->ability, cmpPosition)), GPOINTER_TO_INT(g_hash_table_lookup(d->ability, cmpPosition)), true ); } int cmpBudget(const void *a, const void *b) { Player *c = (Player *)a; Player *d = (Player *)b; return cmpDouble(c->value_eur, d->value_eur, false); } int cmpSofifaId(const void *a, const void *b) { Player *c = (Player *)a; Player *d = (Player *)b; return cmpString(c->sofifa_id, d->sofifa_id, false); } void getTeam(char *position, int pos) { qsort(player, playerNum, sizeof(Player), cmpBudget); Player *tmpPlayer = NULL; size_t tmpPlayerNum = 0; size_t tmpPlayerSize = 0; for(int i = 0; i < playerNum; ++i) { if(!player[i].selected && player[i].value_eur >= 0 && player[i].value_eur <= budget[pos]) { if(tmpPlayerNum == tmpPlayerSize) { tmpPlayerSize = tmpPlayerSize == 0 ? 1 : tmpPlayerSize << 1; tmpPlayer = realloc(tmpPlayer, tmpPlayerSize * sizeof(Player)); if(!tmpPlayer) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } } tmpPlayer[tmpPlayerNum++] = player[i]; } } if(tmpPlayerNum == 0) { printf("No player can be selected\\n"); return; } cmpPosition = position; qsort(tmpPlayer, tmpPlayerNum, sizeof(Player), cmpAbility); size_t sameAbilityNum = 1; double maxAbility = GPOINTER_TO_INT(g_hash_table_lookup(tmpPlayer[0].ability, position)); for(int i = 1; i < tmpPlayerNum; ++i) { double ability = GPOINTER_TO_INT(g_hash_table_lookup(tmpPlayer[i].ability, position)); if(ability == maxAbility) ++sameAbilityNum; else break; } if(sameAbilityNum == 1) printTeam(&amp;tmpPlayer[0], position); else { qsort(tmpPlayer, sameAbilityNum, sizeof(Player), cmpBudget); size_t sameBudgetNum = 1; double minBudget = tmpPlayer[0].value_eur; for(int i = 1; i < sameAbilityNum; ++i) { if(tmpPlayer[i].value_eur == minBudget) ++sameBudgetNum; else break; } if(sameBudgetNum == 1) printTeam(&amp;tmpPlayer[0], position); else { qsort(tmpPlayer, sameBudgetNum, sizeof(Player), cmpSofifaId); printTeam(&amp;tmpPlayer[0], position); } } for(int i = 0; i < playerNum; ++i) { if(strcmp(player[i].sofifa_id, tmpPlayer[0].sofifa_id) == 0) { player[i].selected = true; break; } } free(tmpPlayer); } int main() { char file[100]; printf("Please enter the dataset: "); fgets(file, 100, stdin); if(file[strlen(file) - 1] == &#39;\\n&#39;) file[strlen(file) - 1] = &#39;\\0&#39;; FILE *fp = fopen(file, "rt"); if(!fp) exit(EXIT_FAILURE); getPlayer(fp); fclose(fp); char inSquad[100]; printf("Please enter the squad: "); fgets(inSquad, 100, stdin); if(inSquad[strlen(inSquad) - 1] == &#39;\\n&#39;) inSquad[strlen(inSquad) - 1] = &#39;\\0&#39;; char **squad = calloc(11, sizeof(char *)); int squadNum = 0; char *token = strtok(inSquad, " "); while(token != NULL) { squad[squadNum] = calloc(strlen(token) + 1, sizeof(char)); strncpy(squad[squadNum], token, strlen(token)); ++squadNum; token = strtok(NULL, " "); } if(strcmp(squad[10], "gk") != 0) { printf("gk must be the last one of the team.\\n"); exit(EXIT_FAILURE); } printf("Budget:\\n"); for(int i = 0; i < 11; ++i) { printf("\\t%s: ", squad[i]); scanf("%lf", &amp;budget[i]); } printf("Team:\\n"); for(int i = 0; i < 11; ++i) { printf("\\t%s: ", squad[i]); getTeam(squad[i], i); } return 0; } Golang 程式碼 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 package main import ( "encoding/csv" "fmt" "os" "sort" "strings" ) var abilityStr = []string{ "ls", "st", "rs", "lw", "lf", "cf", "rf", "rw", "lam", "cam", "ram", "lm", "lcm", "cm", "rcm", "rm", "lwb", "ldm", "cdm", "rdm", "rwb", "lb", "lcb", "cb", "rcb", "rb", "gk", } type Player struct { sofifa_id, short_name string value_eur, wage_eur int club_name string ability map[string]int selected bool } var players []Player func readCSV(csvFile string) { f, err := os.Open(csvFile) if err != nil { panic(err) } defer f.Close() csvReader := csv.NewReader(f) title, err := csvReader.Read() if err != nil { panic(err) } for { record, err := csvReader.Read() if err != nil { break } player := Player{} player.ability = make(map[string]int) for i, v := range record { if title[i] == "sofifa_id" { player.sofifa_id = v } else if title[i] == "short_name" { player.short_name = v } else if title[i] == "value_eur" { if v != "" { fmt.Sscanf(v, "%d", &amp;player.value_eur) } else { player.value_eur = -1 } } else if title[i] == "wage_eur" { if v != "" { fmt.Sscanf(v, "%d", &amp;player.wage_eur) } else { player.wage_eur = -1 } } else if title[i] == "club_name" { player.club_name = v } for _, ability := range abilityStr { if title[i] == ability { var a, b int if strings.Contains(v, "+") { fmt.Sscanf(v, "%d+%d", &amp;a, &amp;b) player.ability[ability] = a + b } else if v != "" { fmt.Sscanf(v, "%d", &amp;a) player.ability[ability] = a } else { player.ability[ability] = -1 } } } } players = append(players, player) } } func printPlayer(squad string, player Player) { fmt.Println( squad, ": ", player.short_name, "/", player.club_name, "/", player.ability[squad], "/", player.value_eur, "/", player.wage_eur, ) } func main() { var csvFile string fmt.Scanf("%s", &amp;csvFile) readCSV(csvFile) var squad []string for i := 0; i < 11; i++ { var id string fmt.Scanf("%s", &amp;id) squad = append(squad, id) } var budget []int for i := 0; i < 11; i++ { var b int fmt.Scanf("%d", &amp;b) budget = append(budget, b) } for i, id := range squad { tmpPlayers := make([]Player, 0) for _, player := range players { if !player.selected && player.value_eur >= 0 && player.value_eur <= budget[i] { tmpPlayers = append(tmpPlayers, player) } } if len(tmpPlayers) == 0 { fmt.Println("No player can be selected") } sort.Slice(tmpPlayers, func(i, j int) bool { return tmpPlayers[i].ability[id] > tmpPlayers[j].ability[id] }) cntSameAbility := 0 maxAbility := tmpPlayers[0].ability[id] for _, player := range tmpPlayers { if player.ability[id] == maxAbility { cntSameAbility++ } else { break } } if cntSameAbility == 1 { printPlayer(id, tmpPlayers[0]) } else { sort.Slice(tmpPlayers[:cntSameAbility], func(i, j int) bool { return tmpPlayers[i].value_eur < tmpPlayers[j].value_eur }) cntSameBudget := 0 minBudget := tmpPlayers[0].value_eur for _, player := range tmpPlayers[:cntSameAbility] { if player.value_eur == minBudget { cntSameBudget++ } else { break } } if cntSameBudget == 1 { printPlayer(id, tmpPlayers[0]) } else { sort.Slice(tmpPlayers[:cntSameBudget], func(i, j int) bool { return tmpPlayers[i].sofifa_id < tmpPlayers[j].sofifa_id }) printPlayer(id, tmpPlayers[0]) } } for j := 0; j < len(players); j++ { if players[j].sofifa_id == tmpPlayers[0].sofifa_id { players[j].selected = true } } } } '><meta property='og:url' content='https://blog.smallten.me/p/computer_programming_2-09/'><meta property='og:site_name' content='小十的部落格'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='C'><meta property='article:tag' content='Go'><meta property='article:published_time' content='2023-04-25T01:56:39+08:00'><meta property='article:modified_time' content='2023-04-25T02:13:24+08:00'><meta name=twitter:title content="程式設計(二)-09：111-2 HW0204 參考作法"><meta name=twitter:description content='題目 HW02 players_20.csv 參考作法 C 語言 在 main() 中讀取 file 跟 inSquad 時偷懶，所沒用動態記憶體配置。 但在讀取 CSV 內容時，有使用動態記憶體配置呦！ 然後可以的話，建議可以直接使用 mmap() 來讀取檔案，比較簡單，但當時同學還沒上到這個，就沒使用了。（攤～ Makefile 因為有使用到 Glib，所以要加上一些東西。 1 2 all: gcc hw0204.c `pkg-config --cflags --libs glib-2.0` -o hw0204 程式碼 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 #include <stdio.h> #include <stdlib.h> #include <string.h> #include <stdbool.h> #include <ctype.h> #include <glib.h> #define bufSize 256 static char abilityStr[27][5] = { "ls", "st", "rs", "lw", "lf", "cf", "rf", "rw", "lam", "cam", "ram", "lm", "lcm", "cm", "rcm", "rm", "lwb", "ldm", "cdm", "rdm", "rwb", "lb", "lcb", "cb", "rcb", "rb", "gk" }; typedef struct { char *sofifa_id, *short_name; double value_eur, wage_eur; char *club_name; GHashTable *ability; bool selected; } Player; static Player *player = NULL; static size_t playerNum = 0; static size_t playerSize = 0; static char *cmpPosition; static double budget[11] = {0}; void printTeam(Player *p, char *position) { printf("%s/%s/", p->short_name, p->club_name); double ability = GPOINTER_TO_INT(g_hash_table_lookup(p->ability, position)); g_print("%g/", ability); printf("%d/%d\\n", (int)(p->value_eur), (int)(p->wage_eur)); } double getAbility(char *str) { double a = 0, b = 0; if(strchr(str, &#39;+&#39;) != NULL) sscanf(str, "%lf+%lf", &amp;a, &amp;b); else sscanf(str, "%lf", &amp;a); return a + b; } void parseLine(Player *p, char *token, int cnt) { if(cnt == 0 || cnt == 2 || cnt == 14) { char *str = calloc(strlen(token) + 1, sizeof(char)); strcpy(str, token); if(cnt == 0) p->sofifa_id = str; else if(cnt == 2) p->short_name = str; else if(cnt == 14) p->club_name = str; } else if(cnt == 7 || cnt == 8) { char **endPtr = NULL; bool spaceFlag = true; size_t tokenLen = strlen(token); for(int i = 0; i < tokenLen; ++i) { if(!isspace(token[i])) { spaceFlag = false; break; } } double eur = spaceFlag ? -1 : strtod(token, endPtr); if(cnt == 7) p->value_eur = eur; else if(cnt == 8) p->wage_eur = eur; } else if(cnt >= 78 && cnt <= 104) { g_hash_table_insert(p->ability, abilityStr[cnt - 78], GINT_TO_POINTER(getAbility(token))); } } void getPlayer(FILE *fp) { char *line = calloc(bufSize, sizeof(char)); size_t lineCnt = 0; while((line = fgets(line, bufSize, fp)) != NULL) { size_t len = strlen(line); if(len == bufSize - 1 && line[len - 1] != &#39;\\n&#39;) { int newLen = len << 1; line = realloc(line, newLen); if(!line) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } while(fgets(line + len, newLen - len, fp) != NULL) { len = strlen(line); if(line[len - 1] == &#39;\\n&#39;) break; newLen = len << 1; line = realloc(line, newLen); if(!line) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } } } char *find = strstr(line, ",,"); while(find != NULL) { char *tmp = calloc(strlen(line) + 2, sizeof(char)); tmp[strlen(line) + 1] = &#39;\\0&#39;; strncpy(tmp, line, find - line + 1); tmp[find - line + 1] = &#39; &#39;; strncat(tmp + (find - line) + 2, find + 1, strlen(find + 1)); free(line); line = tmp; find = strstr(line, ",,"); } if(lineCnt == 0) { ++lineCnt; continue; } if(playerNum == playerSize) { playerSize = playerSize == 0 ? 1 : playerSize << 1; player = realloc(player, playerSize * sizeof(Player)); if(!player) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } for(size_t i = playerNum; i < playerSize; ++i) { player[i].ability = g_hash_table_new(g_str_hash, g_str_equal); player[i].selected = false; } } int cnt = 0; char *token = strtok(line, ","); while(token != NULL) { if(token[0] == &#39;\\"&#39;) { char *tmp = calloc(strlen(token) + 1, sizeof(char)); strncpy(tmp, token + 1, strlen(token)); tmp[strlen(tmp)] = &#39;,&#39;; token = strtok(NULL, "\\""); tmp = realloc(tmp, strlen(tmp) + strlen(token) + 1); strncat(tmp, token, strlen(token)); tmp[strlen(tmp)] = &#39;\\0&#39;; parseLine(&amp;player[playerNum], tmp, cnt); free(tmp); } else parseLine(&amp;player[playerNum], token, cnt); token = strtok(NULL, ","); ++cnt; } ++lineCnt; ++playerNum; } free(line); } int cmpDouble(const double a, const double b, bool flag) { if(flag) return (a > b) ? -1 : (a < b) ? 1 : 0; // greater return (a < b) ? -1 : (a > b) ? 1 : 0; // less } int cmpString(const char *a, const char *b, bool flag) { if(flag) return strcmp(b, a); return strcmp(a, b); } int cmpAbility(const void *a, const void *b) { const Player *c = (Player *)a; const Player *d = (Player *)b; return cmpDouble( GPOINTER_TO_INT(g_hash_table_lookup(c->ability, cmpPosition)), GPOINTER_TO_INT(g_hash_table_lookup(d->ability, cmpPosition)), true ); } int cmpBudget(const void *a, const void *b) { Player *c = (Player *)a; Player *d = (Player *)b; return cmpDouble(c->value_eur, d->value_eur, false); } int cmpSofifaId(const void *a, const void *b) { Player *c = (Player *)a; Player *d = (Player *)b; return cmpString(c->sofifa_id, d->sofifa_id, false); } void getTeam(char *position, int pos) { qsort(player, playerNum, sizeof(Player), cmpBudget); Player *tmpPlayer = NULL; size_t tmpPlayerNum = 0; size_t tmpPlayerSize = 0; for(int i = 0; i < playerNum; ++i) { if(!player[i].selected && player[i].value_eur >= 0 && player[i].value_eur <= budget[pos]) { if(tmpPlayerNum == tmpPlayerSize) { tmpPlayerSize = tmpPlayerSize == 0 ? 1 : tmpPlayerSize << 1; tmpPlayer = realloc(tmpPlayer, tmpPlayerSize * sizeof(Player)); if(!tmpPlayer) { printf("realloc failed\\n"); exit(EXIT_FAILURE); } } tmpPlayer[tmpPlayerNum++] = player[i]; } } if(tmpPlayerNum == 0) { printf("No player can be selected\\n"); return; } cmpPosition = position; qsort(tmpPlayer, tmpPlayerNum, sizeof(Player), cmpAbility); size_t sameAbilityNum = 1; double maxAbility = GPOINTER_TO_INT(g_hash_table_lookup(tmpPlayer[0].ability, position)); for(int i = 1; i < tmpPlayerNum; ++i) { double ability = GPOINTER_TO_INT(g_hash_table_lookup(tmpPlayer[i].ability, position)); if(ability == maxAbility) ++sameAbilityNum; else break; } if(sameAbilityNum == 1) printTeam(&amp;tmpPlayer[0], position); else { qsort(tmpPlayer, sameAbilityNum, sizeof(Player), cmpBudget); size_t sameBudgetNum = 1; double minBudget = tmpPlayer[0].value_eur; for(int i = 1; i < sameAbilityNum; ++i) { if(tmpPlayer[i].value_eur == minBudget) ++sameBudgetNum; else break; } if(sameBudgetNum == 1) printTeam(&amp;tmpPlayer[0], position); else { qsort(tmpPlayer, sameBudgetNum, sizeof(Player), cmpSofifaId); printTeam(&amp;tmpPlayer[0], position); } } for(int i = 0; i < playerNum; ++i) { if(strcmp(player[i].sofifa_id, tmpPlayer[0].sofifa_id) == 0) { player[i].selected = true; break; } } free(tmpPlayer); } int main() { char file[100]; printf("Please enter the dataset: "); fgets(file, 100, stdin); if(file[strlen(file) - 1] == &#39;\\n&#39;) file[strlen(file) - 1] = &#39;\\0&#39;; FILE *fp = fopen(file, "rt"); if(!fp) exit(EXIT_FAILURE); getPlayer(fp); fclose(fp); char inSquad[100]; printf("Please enter the squad: "); fgets(inSquad, 100, stdin); if(inSquad[strlen(inSquad) - 1] == &#39;\\n&#39;) inSquad[strlen(inSquad) - 1] = &#39;\\0&#39;; char **squad = calloc(11, sizeof(char *)); int squadNum = 0; char *token = strtok(inSquad, " "); while(token != NULL) { squad[squadNum] = calloc(strlen(token) + 1, sizeof(char)); strncpy(squad[squadNum], token, strlen(token)); ++squadNum; token = strtok(NULL, " "); } if(strcmp(squad[10], "gk") != 0) { printf("gk must be the last one of the team.\\n"); exit(EXIT_FAILURE); } printf("Budget:\\n"); for(int i = 0; i < 11; ++i) { printf("\\t%s: ", squad[i]); scanf("%lf", &amp;budget[i]); } printf("Team:\\n"); for(int i = 0; i < 11; ++i) { printf("\\t%s: ", squad[i]); getTeam(squad[i], i); } return 0; } Golang 程式碼 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 package main import ( "encoding/csv" "fmt" "os" "sort" "strings" ) var abilityStr = []string{ "ls", "st", "rs", "lw", "lf", "cf", "rf", "rw", "lam", "cam", "ram", "lm", "lcm", "cm", "rcm", "rm", "lwb", "ldm", "cdm", "rdm", "rwb", "lb", "lcb", "cb", "rcb", "rb", "gk", } type Player struct { sofifa_id, short_name string value_eur, wage_eur int club_name string ability map[string]int selected bool } var players []Player func readCSV(csvFile string) { f, err := os.Open(csvFile) if err != nil { panic(err) } defer f.Close() csvReader := csv.NewReader(f) title, err := csvReader.Read() if err != nil { panic(err) } for { record, err := csvReader.Read() if err != nil { break } player := Player{} player.ability = make(map[string]int) for i, v := range record { if title[i] == "sofifa_id" { player.sofifa_id = v } else if title[i] == "short_name" { player.short_name = v } else if title[i] == "value_eur" { if v != "" { fmt.Sscanf(v, "%d", &amp;player.value_eur) } else { player.value_eur = -1 } } else if title[i] == "wage_eur" { if v != "" { fmt.Sscanf(v, "%d", &amp;player.wage_eur) } else { player.wage_eur = -1 } } else if title[i] == "club_name" { player.club_name = v } for _, ability := range abilityStr { if title[i] == ability { var a, b int if strings.Contains(v, "+") { fmt.Sscanf(v, "%d+%d", &amp;a, &amp;b) player.ability[ability] = a + b } else if v != "" { fmt.Sscanf(v, "%d", &amp;a) player.ability[ability] = a } else { player.ability[ability] = -1 } } } } players = append(players, player) } } func printPlayer(squad string, player Player) { fmt.Println( squad, ": ", player.short_name, "/", player.club_name, "/", player.ability[squad], "/", player.value_eur, "/", player.wage_eur, ) } func main() { var csvFile string fmt.Scanf("%s", &amp;csvFile) readCSV(csvFile) var squad []string for i := 0; i < 11; i++ { var id string fmt.Scanf("%s", &amp;id) squad = append(squad, id) } var budget []int for i := 0; i < 11; i++ { var b int fmt.Scanf("%d", &amp;b) budget = append(budget, b) } for i, id := range squad { tmpPlayers := make([]Player, 0) for _, player := range players { if !player.selected && player.value_eur >= 0 && player.value_eur <= budget[i] { tmpPlayers = append(tmpPlayers, player) } } if len(tmpPlayers) == 0 { fmt.Println("No player can be selected") } sort.Slice(tmpPlayers, func(i, j int) bool { return tmpPlayers[i].ability[id] > tmpPlayers[j].ability[id] }) cntSameAbility := 0 maxAbility := tmpPlayers[0].ability[id] for _, player := range tmpPlayers { if player.ability[id] == maxAbility { cntSameAbility++ } else { break } } if cntSameAbility == 1 { printPlayer(id, tmpPlayers[0]) } else { sort.Slice(tmpPlayers[:cntSameAbility], func(i, j int) bool { return tmpPlayers[i].value_eur < tmpPlayers[j].value_eur }) cntSameBudget := 0 minBudget := tmpPlayers[0].value_eur for _, player := range tmpPlayers[:cntSameAbility] { if player.value_eur == minBudget { cntSameBudget++ } else { break } } if cntSameBudget == 1 { printPlayer(id, tmpPlayers[0]) } else { sort.Slice(tmpPlayers[:cntSameBudget], func(i, j int) bool { return tmpPlayers[i].sofifa_id < tmpPlayers[j].sofifa_id }) printPlayer(id, tmpPlayers[0]) } } for j := 0; j < len(players); j++ { if players[j].sofifa_id == tmpPlayers[0].sofifa_id { players[j].selected = true } } } } '><link rel="shortcut icon" href=/image/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-9L51K4B2CR"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9L51K4B2CR")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu11372239997511506855.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>小十的部落格</a></h1><h2 class=site-description>教學、資訊分享、生活記趣</h2></div></header><ol class=menu-social><li><a href=https://github.com/Adam7066 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#題目>題目</a></li><li><a href=#參考作法>參考作法</a><ul><li><a href=#c-語言>C 語言</a><ul><li><a href=#makefile>Makefile</a></li><li><a href=#程式碼>程式碼</a></li></ul></li><li><a href=#golang>Golang</a><ul><li><a href=#程式碼-1>程式碼</a></li></ul></li></ul></li></ul></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88%E4%BA%8C/>程式設計(二)</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/computer_programming_2-09/>程式設計(二)-09：111-2 HW0204 參考作法</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Apr 25, 2023</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>10 minute read</time></div></footer></div></header><section class=article-content><h1 id=題目><a href=#%e9%a1%8c%e7%9b%ae class=header-anchor></a>題目</h1><ul><li><a class=link href=./hw02.pdf download=HW02.pdf>HW02</a></li><li><a class=link href=./players_20.csv download=players_20.csv>players_20.csv</a></li></ul><h1 id=參考作法><a href=#%e5%8f%83%e8%80%83%e4%bd%9c%e6%b3%95 class=header-anchor></a>參考作法</h1><h2 id=c-語言><a href=#c-%e8%aa%9e%e8%a8%80 class=header-anchor></a>C 語言</h2><ul><li>在 <code>main()</code> 中讀取 <code>file</code> 跟 <code>inSquad</code> 時偷懶，所沒用動態記憶體配置。</li><li>但在讀取 CSV 內容時，有使用動態記憶體配置呦！</li><li>然後可以的話，建議可以直接使用 <code>mmap()</code> 來讀取檔案，比較簡單，但當時同學還沒上到這個，就沒使用了。（攤～</li></ul><h3 id=makefile><a href=#makefile class=header-anchor></a>Makefile</h3><ul><li>因為有使用到 <code>Glib</code>，所以要加上一些東西。</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-makefile data-lang=makefile><span class=line><span class=cl><span class=nf>all</span><span class=o>:</span>
</span></span><span class=line><span class=cl>	gcc hw0204.c <span class=sb>`</span>pkg-config --cflags --libs glib-2.0<span class=sb>`</span> -o hw0204
</span></span></code></pre></td></tr></table></div></div><h3 id=程式碼><a href=#%e7%a8%8b%e5%bc%8f%e7%a2%bc class=header-anchor></a>程式碼</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span><span class=lnt>216
</span><span class=lnt>217
</span><span class=lnt>218
</span><span class=lnt>219
</span><span class=lnt>220
</span><span class=lnt>221
</span><span class=lnt>222
</span><span class=lnt>223
</span><span class=lnt>224
</span><span class=lnt>225
</span><span class=lnt>226
</span><span class=lnt>227
</span><span class=lnt>228
</span><span class=lnt>229
</span><span class=lnt>230
</span><span class=lnt>231
</span><span class=lnt>232
</span><span class=lnt>233
</span><span class=lnt>234
</span><span class=lnt>235
</span><span class=lnt>236
</span><span class=lnt>237
</span><span class=lnt>238
</span><span class=lnt>239
</span><span class=lnt>240
</span><span class=lnt>241
</span><span class=lnt>242
</span><span class=lnt>243
</span><span class=lnt>244
</span><span class=lnt>245
</span><span class=lnt>246
</span><span class=lnt>247
</span><span class=lnt>248
</span><span class=lnt>249
</span><span class=lnt>250
</span><span class=lnt>251
</span><span class=lnt>252
</span><span class=lnt>253
</span><span class=lnt>254
</span><span class=lnt>255
</span><span class=lnt>256
</span><span class=lnt>257
</span><span class=lnt>258
</span><span class=lnt>259
</span><span class=lnt>260
</span><span class=lnt>261
</span><span class=lnt>262
</span><span class=lnt>263
</span><span class=lnt>264
</span><span class=lnt>265
</span><span class=lnt>266
</span><span class=lnt>267
</span><span class=lnt>268
</span><span class=lnt>269
</span><span class=lnt>270
</span><span class=lnt>271
</span><span class=lnt>272
</span><span class=lnt>273
</span><span class=lnt>274
</span><span class=lnt>275
</span><span class=lnt>276
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdbool.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;ctype.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;glib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#define bufSize 256
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>char</span> <span class=n>abilityStr</span><span class=p>[</span><span class=mi>27</span><span class=p>][</span><span class=mi>5</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;ls&#34;</span><span class=p>,</span> <span class=s>&#34;st&#34;</span><span class=p>,</span> <span class=s>&#34;rs&#34;</span><span class=p>,</span> <span class=s>&#34;lw&#34;</span><span class=p>,</span> <span class=s>&#34;lf&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;cf&#34;</span><span class=p>,</span> <span class=s>&#34;rf&#34;</span><span class=p>,</span> <span class=s>&#34;rw&#34;</span><span class=p>,</span> <span class=s>&#34;lam&#34;</span><span class=p>,</span> <span class=s>&#34;cam&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;ram&#34;</span><span class=p>,</span> <span class=s>&#34;lm&#34;</span><span class=p>,</span> <span class=s>&#34;lcm&#34;</span><span class=p>,</span> <span class=s>&#34;cm&#34;</span><span class=p>,</span> <span class=s>&#34;rcm&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;rm&#34;</span><span class=p>,</span> <span class=s>&#34;lwb&#34;</span><span class=p>,</span> <span class=s>&#34;ldm&#34;</span><span class=p>,</span> <span class=s>&#34;cdm&#34;</span><span class=p>,</span> <span class=s>&#34;rdm&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;rwb&#34;</span><span class=p>,</span> <span class=s>&#34;lb&#34;</span><span class=p>,</span> <span class=s>&#34;lcb&#34;</span><span class=p>,</span> <span class=s>&#34;cb&#34;</span><span class=p>,</span> <span class=s>&#34;rcb&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;rb&#34;</span><span class=p>,</span> <span class=s>&#34;gk&#34;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=k>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=o>*</span><span class=n>sofifa_id</span><span class=p>,</span> <span class=o>*</span><span class=n>short_name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>value_eur</span><span class=p>,</span> <span class=n>wage_eur</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=o>*</span><span class=n>club_name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>GHashTable</span> <span class=o>*</span><span class=n>ability</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>selected</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>Player</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=n>Player</span> <span class=o>*</span><span class=n>player</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>size_t</span> <span class=n>playerNum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>size_t</span> <span class=n>playerSize</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>char</span> <span class=o>*</span><span class=n>cmpPosition</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>double</span> <span class=n>budget</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>printTeam</span><span class=p>(</span><span class=n>Player</span> <span class=o>*</span><span class=n>p</span><span class=p>,</span> <span class=kt>char</span> <span class=o>*</span><span class=n>position</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%s/%s/&#34;</span><span class=p>,</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>short_name</span><span class=p>,</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>club_name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>ability</span> <span class=o>=</span> <span class=nf>GPOINTER_TO_INT</span><span class=p>(</span><span class=nf>g_hash_table_lookup</span><span class=p>(</span><span class=n>p</span><span class=o>-&gt;</span><span class=n>ability</span><span class=p>,</span> <span class=n>position</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>g_print</span><span class=p>(</span><span class=s>&#34;%g/&#34;</span><span class=p>,</span> <span class=n>ability</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d/%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=p>(</span><span class=kt>int</span><span class=p>)(</span><span class=n>p</span><span class=o>-&gt;</span><span class=n>value_eur</span><span class=p>),</span> <span class=p>(</span><span class=kt>int</span><span class=p>)(</span><span class=n>p</span><span class=o>-&gt;</span><span class=n>wage_eur</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>double</span> <span class=nf>getAbility</span><span class=p>(</span><span class=kt>char</span> <span class=o>*</span><span class=n>str</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=nf>strchr</span><span class=p>(</span><span class=n>str</span><span class=p>,</span> <span class=sc>&#39;+&#39;</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=nf>sscanf</span><span class=p>(</span><span class=n>str</span><span class=p>,</span> <span class=s>&#34;%lf+%lf&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=nf>sscanf</span><span class=p>(</span><span class=n>str</span><span class=p>,</span> <span class=s>&#34;%lf&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>parseLine</span><span class=p>(</span><span class=n>Player</span> <span class=o>*</span><span class=n>p</span><span class=p>,</span> <span class=kt>char</span> <span class=o>*</span><span class=n>token</span><span class=p>,</span> <span class=kt>int</span> <span class=n>cnt</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>cnt</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>cnt</span> <span class=o>==</span> <span class=mi>2</span> <span class=o>||</span> <span class=n>cnt</span> <span class=o>==</span> <span class=mi>14</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=o>*</span><span class=n>str</span> <span class=o>=</span> <span class=nf>calloc</span><span class=p>(</span><span class=nf>strlen</span><span class=p>(</span><span class=n>token</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=nf>strcpy</span><span class=p>(</span><span class=n>str</span><span class=p>,</span> <span class=n>token</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>cnt</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>sofifa_id</span> <span class=o>=</span> <span class=n>str</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>cnt</span> <span class=o>==</span> <span class=mi>2</span><span class=p>)</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>short_name</span> <span class=o>=</span> <span class=n>str</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>cnt</span> <span class=o>==</span> <span class=mi>14</span><span class=p>)</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>club_name</span> <span class=o>=</span> <span class=n>str</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>cnt</span> <span class=o>==</span> <span class=mi>7</span> <span class=o>||</span> <span class=n>cnt</span> <span class=o>==</span> <span class=mi>8</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=o>**</span><span class=n>endPtr</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>bool</span> <span class=n>spaceFlag</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>size_t</span> <span class=n>tokenLen</span> <span class=o>=</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>token</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>tokenLen</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=nf>isspace</span><span class=p>(</span><span class=n>token</span><span class=p>[</span><span class=n>i</span><span class=p>]))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>spaceFlag</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=kt>double</span> <span class=n>eur</span> <span class=o>=</span> <span class=n>spaceFlag</span> <span class=o>?</span> <span class=o>-</span><span class=mi>1</span> <span class=o>:</span> <span class=nf>strtod</span><span class=p>(</span><span class=n>token</span><span class=p>,</span> <span class=n>endPtr</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>cnt</span> <span class=o>==</span> <span class=mi>7</span><span class=p>)</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>value_eur</span> <span class=o>=</span> <span class=n>eur</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>cnt</span> <span class=o>==</span> <span class=mi>8</span><span class=p>)</span> <span class=n>p</span><span class=o>-&gt;</span><span class=n>wage_eur</span> <span class=o>=</span> <span class=n>eur</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>cnt</span> <span class=o>&gt;=</span> <span class=mi>78</span> <span class=o>&amp;&amp;</span> <span class=n>cnt</span> <span class=o>&lt;=</span> <span class=mi>104</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>g_hash_table_insert</span><span class=p>(</span><span class=n>p</span><span class=o>-&gt;</span><span class=n>ability</span><span class=p>,</span> <span class=n>abilityStr</span><span class=p>[</span><span class=n>cnt</span> <span class=o>-</span> <span class=mi>78</span><span class=p>],</span> <span class=nf>GINT_TO_POINTER</span><span class=p>(</span><span class=nf>getAbility</span><span class=p>(</span><span class=n>token</span><span class=p>)));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>getPlayer</span><span class=p>(</span><span class=n>FILE</span> <span class=o>*</span><span class=n>fp</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=o>*</span><span class=n>line</span> <span class=o>=</span> <span class=nf>calloc</span><span class=p>(</span><span class=n>bufSize</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=kt>size_t</span> <span class=n>lineCnt</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span><span class=p>((</span><span class=n>line</span> <span class=o>=</span> <span class=nf>fgets</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=n>bufSize</span><span class=p>,</span> <span class=n>fp</span><span class=p>))</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>size_t</span> <span class=n>len</span> <span class=o>=</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>line</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>len</span> <span class=o>==</span> <span class=n>bufSize</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>&amp;&amp;</span> <span class=n>line</span><span class=p>[</span><span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>!=</span> <span class=sc>&#39;\n&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>newLen</span> <span class=o>=</span> <span class=n>len</span> <span class=o>&lt;&lt;</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>line</span> <span class=o>=</span> <span class=nf>realloc</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=n>newLen</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>line</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;realloc failed</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nf>exit</span><span class=p>(</span><span class=n>EXIT_FAILURE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span><span class=p>(</span><span class=nf>fgets</span><span class=p>(</span><span class=n>line</span> <span class=o>+</span> <span class=n>len</span><span class=p>,</span> <span class=n>newLen</span> <span class=o>-</span> <span class=n>len</span><span class=p>,</span> <span class=n>fp</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>len</span> <span class=o>=</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>line</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>line</span><span class=p>[</span><span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;\n&#39;</span><span class=p>)</span> <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>newLen</span> <span class=o>=</span> <span class=n>len</span> <span class=o>&lt;&lt;</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>line</span> <span class=o>=</span> <span class=nf>realloc</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=n>newLen</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>line</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;realloc failed</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=nf>exit</span><span class=p>(</span><span class=n>EXIT_FAILURE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=o>*</span><span class=n>find</span> <span class=o>=</span> <span class=nf>strstr</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=s>&#34;,,&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span><span class=p>(</span><span class=n>find</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=o>*</span><span class=n>tmp</span> <span class=o>=</span> <span class=nf>calloc</span><span class=p>(</span><span class=nf>strlen</span><span class=p>(</span><span class=n>line</span><span class=p>)</span> <span class=o>+</span> <span class=mi>2</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=n>tmp</span><span class=p>[</span><span class=nf>strlen</span><span class=p>(</span><span class=n>line</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39;\0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nf>strncpy</span><span class=p>(</span><span class=n>tmp</span><span class=p>,</span> <span class=n>line</span><span class=p>,</span> <span class=n>find</span> <span class=o>-</span> <span class=n>line</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>tmp</span><span class=p>[</span><span class=n>find</span> <span class=o>-</span> <span class=n>line</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39; &#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=nf>strncat</span><span class=p>(</span><span class=n>tmp</span> <span class=o>+</span> <span class=p>(</span><span class=n>find</span> <span class=o>-</span> <span class=n>line</span><span class=p>)</span> <span class=o>+</span> <span class=mi>2</span><span class=p>,</span> <span class=n>find</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>find</span> <span class=o>+</span> <span class=mi>1</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=nf>free</span><span class=p>(</span><span class=n>line</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>line</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>find</span> <span class=o>=</span> <span class=nf>strstr</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=s>&#34;,,&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>lineCnt</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=o>++</span><span class=n>lineCnt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>playerNum</span> <span class=o>==</span> <span class=n>playerSize</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>playerSize</span> <span class=o>=</span> <span class=n>playerSize</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>?</span> <span class=mi>1</span> <span class=o>:</span> <span class=n>playerSize</span> <span class=o>&lt;&lt;</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>player</span> <span class=o>=</span> <span class=nf>realloc</span><span class=p>(</span><span class=n>player</span><span class=p>,</span> <span class=n>playerSize</span> <span class=o>*</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>Player</span><span class=p>));</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>player</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;realloc failed</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nf>exit</span><span class=p>(</span><span class=n>EXIT_FAILURE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span><span class=p>(</span><span class=kt>size_t</span> <span class=n>i</span> <span class=o>=</span> <span class=n>playerNum</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>playerSize</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>player</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>ability</span> <span class=o>=</span> <span class=nf>g_hash_table_new</span><span class=p>(</span><span class=n>g_str_hash</span><span class=p>,</span> <span class=n>g_str_equal</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>player</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>selected</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>cnt</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=o>*</span><span class=n>token</span> <span class=o>=</span> <span class=nf>strtok</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=s>&#34;,&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span><span class=p>(</span><span class=n>token</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>token</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;\&#34;&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>char</span> <span class=o>*</span><span class=n>tmp</span> <span class=o>=</span> <span class=nf>calloc</span><span class=p>(</span><span class=nf>strlen</span><span class=p>(</span><span class=n>token</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=nf>strncpy</span><span class=p>(</span><span class=n>tmp</span><span class=p>,</span> <span class=n>token</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>token</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=n>tmp</span><span class=p>[</span><span class=nf>strlen</span><span class=p>(</span><span class=n>tmp</span><span class=p>)]</span> <span class=o>=</span> <span class=sc>&#39;,&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>token</span> <span class=o>=</span> <span class=nf>strtok</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34;</span><span class=se>\&#34;</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>tmp</span> <span class=o>=</span> <span class=nf>realloc</span><span class=p>(</span><span class=n>tmp</span><span class=p>,</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>tmp</span><span class=p>)</span> <span class=o>+</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>token</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nf>strncat</span><span class=p>(</span><span class=n>tmp</span><span class=p>,</span> <span class=n>token</span><span class=p>,</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>token</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=n>tmp</span><span class=p>[</span><span class=nf>strlen</span><span class=p>(</span><span class=n>tmp</span><span class=p>)]</span> <span class=o>=</span> <span class=sc>&#39;\0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=nf>parseLine</span><span class=p>(</span><span class=o>&amp;</span><span class=n>player</span><span class=p>[</span><span class=n>playerNum</span><span class=p>],</span> <span class=n>tmp</span><span class=p>,</span> <span class=n>cnt</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=nf>free</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span> <span class=nf>parseLine</span><span class=p>(</span><span class=o>&amp;</span><span class=n>player</span><span class=p>[</span><span class=n>playerNum</span><span class=p>],</span> <span class=n>token</span><span class=p>,</span> <span class=n>cnt</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>token</span> <span class=o>=</span> <span class=nf>strtok</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34;,&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=o>++</span><span class=n>cnt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>++</span><span class=n>lineCnt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>++</span><span class=n>playerNum</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nf>free</span><span class=p>(</span><span class=n>line</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>cmpDouble</span><span class=p>(</span><span class=k>const</span> <span class=kt>double</span> <span class=n>a</span><span class=p>,</span> <span class=k>const</span> <span class=kt>double</span> <span class=n>b</span><span class=p>,</span> <span class=kt>bool</span> <span class=n>flag</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>flag</span><span class=p>)</span> <span class=k>return</span> <span class=p>(</span><span class=n>a</span> <span class=o>&gt;</span> <span class=n>b</span><span class=p>)</span> <span class=o>?</span> <span class=o>-</span><span class=mi>1</span> <span class=o>:</span> <span class=p>(</span><span class=n>a</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>)</span> <span class=o>?</span> <span class=mi>1</span> <span class=o>:</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>// greater
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=p>(</span><span class=n>a</span> <span class=o>&lt;</span> <span class=n>b</span><span class=p>)</span> <span class=o>?</span> <span class=o>-</span><span class=mi>1</span> <span class=o>:</span> <span class=p>(</span><span class=n>a</span> <span class=o>&gt;</span> <span class=n>b</span><span class=p>)</span> <span class=o>?</span> <span class=mi>1</span> <span class=o>:</span> <span class=mi>0</span><span class=p>;</span> <span class=c1>// less
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>cmpString</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>a</span><span class=p>,</span> <span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>b</span><span class=p>,</span> <span class=kt>bool</span> <span class=n>flag</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>flag</span><span class=p>)</span> <span class=k>return</span> <span class=nf>strcmp</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>strcmp</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>cmpAbility</span><span class=p>(</span><span class=k>const</span> <span class=kt>void</span> <span class=o>*</span><span class=n>a</span><span class=p>,</span> <span class=k>const</span> <span class=kt>void</span> <span class=o>*</span><span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>Player</span> <span class=o>*</span><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=n>Player</span> <span class=o>*</span><span class=p>)</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>Player</span> <span class=o>*</span><span class=n>d</span> <span class=o>=</span> <span class=p>(</span><span class=n>Player</span> <span class=o>*</span><span class=p>)</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>cmpDouble</span><span class=p>(</span>
</span></span><span class=line><span class=cl>               <span class=nf>GPOINTER_TO_INT</span><span class=p>(</span><span class=nf>g_hash_table_lookup</span><span class=p>(</span><span class=n>c</span><span class=o>-&gt;</span><span class=n>ability</span><span class=p>,</span> <span class=n>cmpPosition</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>               <span class=nf>GPOINTER_TO_INT</span><span class=p>(</span><span class=nf>g_hash_table_lookup</span><span class=p>(</span><span class=n>d</span><span class=o>-&gt;</span><span class=n>ability</span><span class=p>,</span> <span class=n>cmpPosition</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>               <span class=nb>true</span>
</span></span><span class=line><span class=cl>           <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>cmpBudget</span><span class=p>(</span><span class=k>const</span> <span class=kt>void</span> <span class=o>*</span><span class=n>a</span><span class=p>,</span> <span class=k>const</span> <span class=kt>void</span> <span class=o>*</span><span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Player</span> <span class=o>*</span><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=n>Player</span> <span class=o>*</span><span class=p>)</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Player</span> <span class=o>*</span><span class=n>d</span> <span class=o>=</span> <span class=p>(</span><span class=n>Player</span> <span class=o>*</span><span class=p>)</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>cmpDouble</span><span class=p>(</span><span class=n>c</span><span class=o>-&gt;</span><span class=n>value_eur</span><span class=p>,</span> <span class=n>d</span><span class=o>-&gt;</span><span class=n>value_eur</span><span class=p>,</span> <span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>cmpSofifaId</span><span class=p>(</span><span class=k>const</span> <span class=kt>void</span> <span class=o>*</span><span class=n>a</span><span class=p>,</span> <span class=k>const</span> <span class=kt>void</span> <span class=o>*</span><span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Player</span> <span class=o>*</span><span class=n>c</span> <span class=o>=</span> <span class=p>(</span><span class=n>Player</span> <span class=o>*</span><span class=p>)</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Player</span> <span class=o>*</span><span class=n>d</span> <span class=o>=</span> <span class=p>(</span><span class=n>Player</span> <span class=o>*</span><span class=p>)</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>cmpString</span><span class=p>(</span><span class=n>c</span><span class=o>-&gt;</span><span class=n>sofifa_id</span><span class=p>,</span> <span class=n>d</span><span class=o>-&gt;</span><span class=n>sofifa_id</span><span class=p>,</span> <span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>getTeam</span><span class=p>(</span><span class=kt>char</span> <span class=o>*</span><span class=n>position</span><span class=p>,</span> <span class=kt>int</span> <span class=n>pos</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>qsort</span><span class=p>(</span><span class=n>player</span><span class=p>,</span> <span class=n>playerNum</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>Player</span><span class=p>),</span> <span class=n>cmpBudget</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>Player</span> <span class=o>*</span><span class=n>tmpPlayer</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>size_t</span> <span class=n>tmpPlayerNum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>size_t</span> <span class=n>tmpPlayerSize</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>playerNum</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>player</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>selected</span> <span class=o>&amp;&amp;</span> <span class=n>player</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>value_eur</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>player</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>value_eur</span> <span class=o>&lt;=</span> <span class=n>budget</span><span class=p>[</span><span class=n>pos</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>tmpPlayerNum</span> <span class=o>==</span> <span class=n>tmpPlayerSize</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>tmpPlayerSize</span> <span class=o>=</span> <span class=n>tmpPlayerSize</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>?</span> <span class=mi>1</span> <span class=o>:</span> <span class=n>tmpPlayerSize</span> <span class=o>&lt;&lt;</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=n>tmpPlayer</span> <span class=o>=</span> <span class=nf>realloc</span><span class=p>(</span><span class=n>tmpPlayer</span><span class=p>,</span> <span class=n>tmpPlayerSize</span> <span class=o>*</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>Player</span><span class=p>));</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>tmpPlayer</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;realloc failed</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=nf>exit</span><span class=p>(</span><span class=n>EXIT_FAILURE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>tmpPlayer</span><span class=p>[</span><span class=n>tmpPlayerNum</span><span class=o>++</span><span class=p>]</span> <span class=o>=</span> <span class=n>player</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>tmpPlayerNum</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;No player can be selected</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cmpPosition</span> <span class=o>=</span> <span class=n>position</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>qsort</span><span class=p>(</span><span class=n>tmpPlayer</span><span class=p>,</span> <span class=n>tmpPlayerNum</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>Player</span><span class=p>),</span> <span class=n>cmpAbility</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>size_t</span> <span class=n>sameAbilityNum</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>maxAbility</span> <span class=o>=</span> <span class=nf>GPOINTER_TO_INT</span><span class=p>(</span><span class=nf>g_hash_table_lookup</span><span class=p>(</span><span class=n>tmpPlayer</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>ability</span><span class=p>,</span> <span class=n>position</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>tmpPlayerNum</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>double</span> <span class=n>ability</span> <span class=o>=</span> <span class=nf>GPOINTER_TO_INT</span><span class=p>(</span><span class=nf>g_hash_table_lookup</span><span class=p>(</span><span class=n>tmpPlayer</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>ability</span><span class=p>,</span> <span class=n>position</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>ability</span> <span class=o>==</span> <span class=n>maxAbility</span><span class=p>)</span> <span class=o>++</span><span class=n>sameAbilityNum</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>sameAbilityNum</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=nf>printTeam</span><span class=p>(</span><span class=o>&amp;</span><span class=n>tmpPlayer</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>position</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>qsort</span><span class=p>(</span><span class=n>tmpPlayer</span><span class=p>,</span> <span class=n>sameAbilityNum</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>Player</span><span class=p>),</span> <span class=n>cmpBudget</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>size_t</span> <span class=n>sameBudgetNum</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>double</span> <span class=n>minBudget</span> <span class=o>=</span> <span class=n>tmpPlayer</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>value_eur</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>sameAbilityNum</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>tmpPlayer</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>value_eur</span> <span class=o>==</span> <span class=n>minBudget</span><span class=p>)</span> <span class=o>++</span><span class=n>sameBudgetNum</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span> <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>sameBudgetNum</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=nf>printTeam</span><span class=p>(</span><span class=o>&amp;</span><span class=n>tmpPlayer</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>position</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nf>qsort</span><span class=p>(</span><span class=n>tmpPlayer</span><span class=p>,</span> <span class=n>sameBudgetNum</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>Player</span><span class=p>),</span> <span class=n>cmpSofifaId</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nf>printTeam</span><span class=p>(</span><span class=o>&amp;</span><span class=n>tmpPlayer</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>position</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>playerNum</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=nf>strcmp</span><span class=p>(</span><span class=n>player</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>sofifa_id</span><span class=p>,</span> <span class=n>tmpPlayer</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=n>sofifa_id</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>player</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>selected</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nf>free</span><span class=p>(</span><span class=n>tmpPlayer</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>file</span><span class=p>[</span><span class=mi>100</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Please enter the dataset: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>fgets</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=n>stdin</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>file</span><span class=p>[</span><span class=nf>strlen</span><span class=p>(</span><span class=n>file</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;\n&#39;</span><span class=p>)</span> <span class=n>file</span><span class=p>[</span><span class=nf>strlen</span><span class=p>(</span><span class=n>file</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39;\0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>FILE</span> <span class=o>*</span><span class=n>fp</span> <span class=o>=</span> <span class=nf>fopen</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=s>&#34;rt&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>fp</span><span class=p>)</span> <span class=nf>exit</span><span class=p>(</span><span class=n>EXIT_FAILURE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>getPlayer</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>fclose</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>inSquad</span><span class=p>[</span><span class=mi>100</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Please enter the squad: &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>fgets</span><span class=p>(</span><span class=n>inSquad</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=n>stdin</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>inSquad</span><span class=p>[</span><span class=nf>strlen</span><span class=p>(</span><span class=n>inSquad</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=sc>&#39;\n&#39;</span><span class=p>)</span> <span class=n>inSquad</span><span class=p>[</span><span class=nf>strlen</span><span class=p>(</span><span class=n>inSquad</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=sc>&#39;\0&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=o>**</span><span class=n>squad</span> <span class=o>=</span> <span class=nf>calloc</span><span class=p>(</span><span class=mi>11</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span> <span class=o>*</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>squadNum</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=o>*</span><span class=n>token</span> <span class=o>=</span> <span class=nf>strtok</span><span class=p>(</span><span class=n>inSquad</span><span class=p>,</span> <span class=s>&#34; &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span><span class=p>(</span><span class=n>token</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>squad</span><span class=p>[</span><span class=n>squadNum</span><span class=p>]</span> <span class=o>=</span> <span class=nf>calloc</span><span class=p>(</span><span class=nf>strlen</span><span class=p>(</span><span class=n>token</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=nf>strncpy</span><span class=p>(</span><span class=n>squad</span><span class=p>[</span><span class=n>squadNum</span><span class=p>],</span> <span class=n>token</span><span class=p>,</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>token</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=o>++</span><span class=n>squadNum</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>token</span> <span class=o>=</span> <span class=nf>strtok</span><span class=p>(</span><span class=nb>NULL</span><span class=p>,</span> <span class=s>&#34; &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=nf>strcmp</span><span class=p>(</span><span class=n>squad</span><span class=p>[</span><span class=mi>10</span><span class=p>],</span> <span class=s>&#34;gk&#34;</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;gk must be the last one of the team.</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nf>exit</span><span class=p>(</span><span class=n>EXIT_FAILURE</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Budget:</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>11</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;</span><span class=se>\t</span><span class=s>%s: &#34;</span><span class=p>,</span> <span class=n>squad</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%lf&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>budget</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Team:</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>11</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;</span><span class=se>\t</span><span class=s>%s: &#34;</span><span class=p>,</span> <span class=n>squad</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=nf>getTeam</span><span class=p>(</span><span class=n>squad</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=golang><a href=#golang class=header-anchor></a>Golang</h2><h3 id=程式碼-1><a href=#%e7%a8%8b%e5%bc%8f%e7%a2%bc-1 class=header-anchor></a>程式碼</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;encoding/csv&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;sort&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;strings&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>abilityStr</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>string</span><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;ls&#34;</span><span class=p>,</span> <span class=s>&#34;st&#34;</span><span class=p>,</span> <span class=s>&#34;rs&#34;</span><span class=p>,</span> <span class=s>&#34;lw&#34;</span><span class=p>,</span> <span class=s>&#34;lf&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;cf&#34;</span><span class=p>,</span> <span class=s>&#34;rf&#34;</span><span class=p>,</span> <span class=s>&#34;rw&#34;</span><span class=p>,</span> <span class=s>&#34;lam&#34;</span><span class=p>,</span> <span class=s>&#34;cam&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;ram&#34;</span><span class=p>,</span> <span class=s>&#34;lm&#34;</span><span class=p>,</span> <span class=s>&#34;lcm&#34;</span><span class=p>,</span> <span class=s>&#34;cm&#34;</span><span class=p>,</span> <span class=s>&#34;rcm&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;rm&#34;</span><span class=p>,</span> <span class=s>&#34;lwb&#34;</span><span class=p>,</span> <span class=s>&#34;ldm&#34;</span><span class=p>,</span> <span class=s>&#34;cdm&#34;</span><span class=p>,</span> <span class=s>&#34;rdm&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;rwb&#34;</span><span class=p>,</span> <span class=s>&#34;lb&#34;</span><span class=p>,</span> <span class=s>&#34;lcb&#34;</span><span class=p>,</span> <span class=s>&#34;cb&#34;</span><span class=p>,</span> <span class=s>&#34;rcb&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;rb&#34;</span><span class=p>,</span> <span class=s>&#34;gk&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Player</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>sofifa_id</span><span class=p>,</span> <span class=nx>short_name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>	<span class=nx>value_eur</span><span class=p>,</span> <span class=nx>wage_eur</span>   <span class=kt>int</span>
</span></span><span class=line><span class=cl>	<span class=nx>club_name</span>             <span class=kt>string</span>
</span></span><span class=line><span class=cl>	<span class=nx>ability</span>               <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl>	<span class=nx>selected</span>              <span class=kt>bool</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>players</span> <span class=p>[]</span><span class=nx>Player</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>readCSV</span><span class=p>(</span><span class=nx>csvFile</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>f</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=nx>csvFile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nb>panic</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nx>f</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nx>csvReader</span> <span class=o>:=</span> <span class=nx>csv</span><span class=p>.</span><span class=nf>NewReader</span><span class=p>(</span><span class=nx>f</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>title</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>csvReader</span><span class=p>.</span><span class=nf>Read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nb>panic</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>record</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>csvReader</span><span class=p>.</span><span class=nf>Read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>break</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=nx>player</span> <span class=o>:=</span> <span class=nx>Player</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>		<span class=nx>player</span><span class=p>.</span><span class=nx>ability</span> <span class=p>=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>record</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=nx>title</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>==</span> <span class=s>&#34;sofifa_id&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nx>player</span><span class=p>.</span><span class=nx>sofifa_id</span> <span class=p>=</span> <span class=nx>v</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>title</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>==</span> <span class=s>&#34;short_name&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nx>player</span><span class=p>.</span><span class=nx>short_name</span> <span class=p>=</span> <span class=nx>v</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>title</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>==</span> <span class=s>&#34;value_eur&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=nx>v</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=nx>fmt</span><span class=p>.</span><span class=nf>Sscanf</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>player</span><span class=p>.</span><span class=nx>value_eur</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=nx>player</span><span class=p>.</span><span class=nx>value_eur</span> <span class=p>=</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>title</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>==</span> <span class=s>&#34;wage_eur&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=nx>v</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=nx>fmt</span><span class=p>.</span><span class=nf>Sscanf</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>player</span><span class=p>.</span><span class=nx>wage_eur</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=nx>player</span><span class=p>.</span><span class=nx>wage_eur</span> <span class=p>=</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>title</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>==</span> <span class=s>&#34;club_name&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nx>player</span><span class=p>.</span><span class=nx>club_name</span> <span class=p>=</span> <span class=nx>v</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>ability</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>abilityStr</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=nx>title</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=o>==</span> <span class=nx>ability</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=kd>var</span> <span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>					<span class=k>if</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Contains</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=s>&#34;+&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>						<span class=nx>fmt</span><span class=p>.</span><span class=nf>Sscanf</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=s>&#34;%d+%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>a</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>						<span class=nx>player</span><span class=p>.</span><span class=nx>ability</span><span class=p>[</span><span class=nx>ability</span><span class=p>]</span> <span class=p>=</span> <span class=nx>a</span> <span class=o>+</span> <span class=nx>b</span>
</span></span><span class=line><span class=cl>					<span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>v</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>						<span class=nx>fmt</span><span class=p>.</span><span class=nf>Sscanf</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>						<span class=nx>player</span><span class=p>.</span><span class=nx>ability</span><span class=p>[</span><span class=nx>ability</span><span class=p>]</span> <span class=p>=</span> <span class=nx>a</span>
</span></span><span class=line><span class=cl>					<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>						<span class=nx>player</span><span class=p>.</span><span class=nx>ability</span><span class=p>[</span><span class=nx>ability</span><span class=p>]</span> <span class=p>=</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>					<span class=p>}</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=nx>players</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>players</span><span class=p>,</span> <span class=nx>player</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>printPlayer</span><span class=p>(</span><span class=nx>squad</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>player</span> <span class=nx>Player</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span>
</span></span><span class=line><span class=cl>		<span class=nx>squad</span><span class=p>,</span> <span class=s>&#34;: &#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>player</span><span class=p>.</span><span class=nx>short_name</span><span class=p>,</span> <span class=s>&#34;/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>player</span><span class=p>.</span><span class=nx>club_name</span><span class=p>,</span> <span class=s>&#34;/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>player</span><span class=p>.</span><span class=nx>ability</span><span class=p>[</span><span class=nx>squad</span><span class=p>],</span> <span class=s>&#34;/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>player</span><span class=p>.</span><span class=nx>value_eur</span><span class=p>,</span> <span class=s>&#34;/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>player</span><span class=p>.</span><span class=nx>wage_eur</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>csvFile</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Scanf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>csvFile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nf>readCSV</span><span class=p>(</span><span class=nx>csvFile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>squad</span> <span class=p>[]</span><span class=kt>string</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>11</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=nx>id</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Scanf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=nx>squad</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>squad</span><span class=p>,</span> <span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>budget</span> <span class=p>[]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>11</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=nx>b</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=nx>budget</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>budget</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>id</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>squad</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>tmpPlayers</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=nx>Player</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>player</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>players</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=p>!</span><span class=nx>player</span><span class=p>.</span><span class=nx>selected</span> <span class=o>&amp;&amp;</span> <span class=nx>player</span><span class=p>.</span><span class=nx>value_eur</span> <span class=o>&gt;=</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=nx>player</span><span class=p>.</span><span class=nx>value_eur</span> <span class=o>&lt;=</span> <span class=nx>budget</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nx>tmpPlayers</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>tmpPlayers</span><span class=p>,</span> <span class=nx>player</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>tmpPlayers</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;No player can be selected&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=nx>sort</span><span class=p>.</span><span class=nf>Slice</span><span class=p>(</span><span class=nx>tmpPlayers</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>ability</span><span class=p>[</span><span class=nx>id</span><span class=p>]</span> <span class=p>&gt;</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>ability</span><span class=p>[</span><span class=nx>id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=p>})</span>
</span></span><span class=line><span class=cl>		<span class=nx>cntSameAbility</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>		<span class=nx>maxAbility</span> <span class=o>:=</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>ability</span><span class=p>[</span><span class=nx>id</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>player</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>tmpPlayers</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=nx>player</span><span class=p>.</span><span class=nx>ability</span><span class=p>[</span><span class=nx>id</span><span class=p>]</span> <span class=o>==</span> <span class=nx>maxAbility</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nx>cntSameAbility</span><span class=o>++</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>break</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>cntSameAbility</span> <span class=o>==</span> <span class=mi>1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nf>printPlayer</span><span class=p>(</span><span class=nx>id</span><span class=p>,</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>sort</span><span class=p>.</span><span class=nf>Slice</span><span class=p>(</span><span class=nx>tmpPlayers</span><span class=p>[:</span><span class=nx>cntSameAbility</span><span class=p>],</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>return</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>value_eur</span> <span class=p>&lt;</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>value_eur</span>
</span></span><span class=line><span class=cl>			<span class=p>})</span>
</span></span><span class=line><span class=cl>			<span class=nx>cntSameBudget</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>			<span class=nx>minBudget</span> <span class=o>:=</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>value_eur</span>
</span></span><span class=line><span class=cl>			<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>player</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>tmpPlayers</span><span class=p>[:</span><span class=nx>cntSameAbility</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=nx>player</span><span class=p>.</span><span class=nx>value_eur</span> <span class=o>==</span> <span class=nx>minBudget</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=nx>cntSameBudget</span><span class=o>++</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=k>break</span>
</span></span><span class=line><span class=cl>				<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=nx>cntSameBudget</span> <span class=o>==</span> <span class=mi>1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nf>printPlayer</span><span class=p>(</span><span class=nx>id</span><span class=p>,</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nx>sort</span><span class=p>.</span><span class=nf>Slice</span><span class=p>(</span><span class=nx>tmpPlayers</span><span class=p>[:</span><span class=nx>cntSameBudget</span><span class=p>],</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>					<span class=k>return</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=nx>i</span><span class=p>].</span><span class=nx>sofifa_id</span> <span class=p>&lt;</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>sofifa_id</span>
</span></span><span class=line><span class=cl>				<span class=p>})</span>
</span></span><span class=line><span class=cl>				<span class=nf>printPlayer</span><span class=p>(</span><span class=nx>id</span><span class=p>,</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span> <span class=nx>j</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>j</span> <span class=p>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=nx>players</span><span class=p>);</span> <span class=nx>j</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=nx>players</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>sofifa_id</span> <span class=o>==</span> <span class=nx>tmpPlayers</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>sofifa_id</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>				<span class=nx>players</span><span class=p>[</span><span class=nx>j</span><span class=p>].</span><span class=nx>selected</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>			<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/c/>C</a>
<a href=/tags/go/>Go</a></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on Apr 25, 2023 02:13 +0800</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/computer_programming_2-08/><div class=article-details><h2 class=article-title>程式設計(二)-08：Linux List</h2></div></a></article><article><a href=/p/computer_programming_2-07/><div class=article-details><h2 class=article-title>程式設計(二)-07：Some Tricks</h2></div></a></article><article><a href=/p/computer_programming_2-06/><div class=article-details><h2 class=article-title>程式設計(二)-06：Macro</h2></div></a></article><article><a href=/p/computer_programming_2-05/><div class=article-details><h2 class=article-title>程式設計(二)-05：Variable Length Arguments List</h2></div></a></article><article><a href=/p/computer_programming_2-04/><div class=article-details><h2 class=article-title>程式設計(二)-04：File Processing-02</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 小十的部落格</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>